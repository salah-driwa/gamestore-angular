

<div class="xl:w-[320px] z-0 xl:h-[330px] md:w-[300px]
 md:h-[310px] sm:w-[280px] sm:h-[290px] rounded-xl 
 relative  
  bg-backgroundlight m-3" 
  (mouseover)="game && display === 'option1' ? onHover(game) : null"
  (mouseleave)="game && display === 'option1'  ? onLeave(game) : null" 
[@scaleOnHover]="game?.hoverState" 
[style.z-index]="zIndex"
[class.xl-w-10-12]="display === 'option2'"
[class.xl:h-60]="display === 'option2'"
[class.mx-auto]="display === 'option2'"

>
  <div   [class.flex]="display === 'option2'">

      <div class="h-fit z-0 relative "  (click)="openGamecardDetail(game?.id || '')" [class.w-72]="display === 'option2'">
        <!-- skeleton.component.html -->
        
             <img  [loading]="'lazy'" class="object-cover rounded-xl rounded-b-none h-52 w-full  z-0" *ngIf="game?.background_image && (game?.hoverState !== 'hovered' && display === 'option1') " [src]="game?.background_image" alt="thumbnail" />
       
        <div *ngIf=" game?.hoverState === 'hovered' || display === 'option2' " >
          
       <div [@carousel]="currentScreenshotIndex" class="relative h-52 w-full">
  <ng-container *ngFor="let screenshot of game?.short_screenshots; let i = index">
    <div *ngIf="i === currentScreenshotIndex">
       <img class="object-cover rounded-xl rounded-b-none h-52 w-full z-0" [src]="screenshot?.image" alt="screenshot {{ i }}"  [loading]="'lazy'"  />
    </div>
  </ng-container>
  <div class="flex justify-center gap-1 relative">
    <ng-container *ngFor="let screenshot of game?.short_screenshots; let i = index" class="h-28">
      <span class="relative flex text-2xl bottom-2 z-50" (mouseover)="setimageindex(i)"><i class="fa-solid fa-minus text-4xl hover:text-white"></i></span>
    </ng-container>
  </div>
</div>

        </div>
       
        <p *ngIf="!game?.background_image">no image provided</p>
      </div>


    <div> 
      <div class="h-fit pt-5 pl-4 z-0 " [class.textandplatform]="display === 'option2'">
        <div class="flex mx-3 gap-5 my-2  z-0">
          <div *ngIf="!IsInCollection" >
            <button  class="bg-blue-500 text-white px-4 py-2 rounded-md flex items-center space-x-2  absolute top-2 right-3" *ngIf="game?.hoverState === 'hovered'" (click)="addtocollectiongame()">
              <i class="fa-regular fa-heart" style="color: #ffffff;"></i>
              
              </button>
             </div> 
             <div *ngIf="IsInCollection" >
              <button  class="bg-red-500 text-white px-4 py-2 rounded-md flex items-center space-x-2  absolute top-2 right-3" *ngIf="game?.hoverState === 'hovered'" (click)="deletefromcollectiongame()">
                <i class="fa-solid fa-heart" style="color: #ffffff;"></i>
                
                </button>
               </div> 


          <div *ngFor="let gamePlatform of game?.parent_platforms">
            <img src="assets/images/platforms/{{gamePlatform.platform.slug }}.svg" alt="Platform 1" class="w-4 h-4 " /> 
             
          </div>
        </div>
        <p class="text-xl font-bold text-white cursor-pointer" (click)="openGamecardDetail(game?.id || '')" >{{ game?.name  }} </p>
      </div>


           <div *ngIf=" display === 'option2' " [class.genersanddescrption]="display === 'option2'"
      
      class="rounded-xl p-5 
      -bottom-16 right-0 left-0 bg-backgroundlight w-full z-50">
        <div class="z-50">
          <div class="flex z-50">
            <p class="text-white opacity-50 z-50">Genres:</p>
            <div class="flex  z-50 gap-3 ml-auto text-white opacity-80">
              <div *ngFor="let genre of game?.genres; let last = last">{{ genre?.name }}<span *ngIf="!last">,</span></div>
            </div>
          </div>
          <div class="flex z-50">
            <p class="text-white opacity-50 z-50">Release Date:</p>
            <div class="flex gap-3 ml-auto text-white opacity-80 z-50">{{ game?.released }}</div>
          </div>
          <div class="flex z-50">
            <p class="text-white opacity-50 z-50">Metacritic:</p>
            <div class="flex gap-3 ml-auto text-white opacity-80 z-50">
              <i class="fas fa-star text-yellow-500 text-md pt-0.5"></i> {{ game?.metacritic }}
            </div>
          </div>
        </div>
           </div>
    </div>
  </div>



    <div *ngIf="game?.hoverState === 'hovered' "
    [class.right-10]="display === 'option2'" [class.bottom-10]="display === 'option2'"
    class="rounded-xl p-5 
    -bottom-16 right-0 left-0 bg-backgroundlight w-full z-50">
      <div class="z-50">
        <div class="flex z-50">
          <p class="text-white opacity-50 z-50">Genres:</p>
          <div class="flex  z-50 gap-3 ml-auto text-white opacity-80">
            <div *ngFor="let genre of game?.genres; let last = last">{{ genre?.name }}<span *ngIf="!last">,</span></div>
          </div>
        </div>
        <div class="flex z-50">
          <p class="text-white opacity-50 z-50">Release Date:</p>
          <div class="flex gap-3 ml-auto text-white opacity-80 z-50">{{ game?.released }}</div>
        </div>
        <div class="flex z-50">
          <p class="text-white opacity-50 z-50">Metacritic:</p>
          <div class="flex gap-3 ml-auto text-white opacity-80 z-50">
            <i class="fas fa-star text-yellow-500 text-md pt-0.5"></i> {{ game?.metacritic }}
          </div>
        </div>
      </div>
    </div>
  </div>
  